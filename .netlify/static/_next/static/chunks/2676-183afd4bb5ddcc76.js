"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2676],{2676:(e,t,s)=>{s.d(t,{Bs:()=>n,FH:()=>c});var r=s(80501),a=s(13568);class o{handleResponse(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.success)return t&&e.data&&a.Ay.success("Operation completed successfully"),{success:!0,data:e.data};{let s=e.error||"An error occurred";return t&&a.Ay.error(s),{success:!1,error:s,details:e.details}}}async checkHealth(){try{let e=await r.o6.get("/health");return this.handleResponse(e,!1)}catch(e){return{success:!1,error:"Health check failed",details:e instanceof Error?e.message:"Unknown error"}}}async getCustomer(e){try{let t=await r.o6.get("/api/customer/".concat(e));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to fetch customer data",details:e instanceof Error?e.message:"Unknown error"}}}async updateCustomer(e,t){try{let s=await r.o6.put("/api/customer/".concat(e),t);return this.handleResponse(s)}catch(e){return{success:!1,error:"Failed to update customer data",details:e instanceof Error?e.message:"Unknown error"}}}async getCustomerICP(e){try{let t=await r.o6.get("/api/customer/".concat(e,"/icp"));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to fetch ICP data",details:e instanceof Error?e.message:"Unknown error"}}}async generateAIICP(e,t){try{let s=await r.o6.post("/api/customer/".concat(e,"/generate-icp"),t);return this.handleResponse(s)}catch(e){return{success:!1,error:"Failed to generate ICP analysis",details:e instanceof Error?e.message:"Unknown error"}}}async calculateCost(e){try{let t=await r.o6.post("/api/cost-calculator/calculate",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to calculate cost",details:e instanceof Error?e.message:"Unknown error"}}}async calculateCostWithAI(e){try{let t=await r.o6.post("/api/cost-calculator/calculate-ai",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to calculate cost with AI",details:e instanceof Error?e.message:"Unknown error"}}}async saveCostCalculation(e){try{let t=await r.o6.post("/api/cost-calculator/save",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to save cost calculation",details:e instanceof Error?e.message:"Unknown error"}}}async getCostCalculationHistory(e){try{let t=await r.o6.get("/api/cost-calculator/history/".concat(e));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to fetch cost calculation history",details:e instanceof Error?e.message:"Unknown error"}}}async generateBusinessCase(e){try{let t=await r.o6.post("/api/business-case/generate",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to generate business case",details:e instanceof Error?e.message:"Unknown error"}}}async customizeBusinessCase(e,t){try{let s=await r.o6.post("/api/business-case/customize",{businessCaseId:e,customizations:t});return this.handleResponse(s)}catch(e){return{success:!1,error:"Failed to customize business case",details:e instanceof Error?e.message:"Unknown error"}}}async saveBusinessCase(e){try{let t=await r.o6.post("/api/business-case/save",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to save business case",details:e instanceof Error?e.message:"Unknown error"}}}async getBusinessCaseTemplates(){try{let e=await r.o6.get("/api/business-case/templates");return this.handleResponse(e)}catch(e){return{success:!1,error:"Failed to fetch business case templates",details:e instanceof Error?e.message:"Unknown error"}}}async getBusinessCaseHistory(e){try{let t=await r.o6.get("/api/business-case/".concat(e,"/history"));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to fetch business case history",details:e instanceof Error?e.message:"Unknown error"}}}async getCustomerProgress(e){try{let t=await r.o6.get("/api/progress/".concat(e));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to fetch progress data",details:e instanceof Error?e.message:"Unknown error"}}}async trackProgress(e,t,s){try{let a=await r.o6.post("/api/progress/".concat(e,"/track"),{action:t,metadata:s});return this.handleResponse(a)}catch(e){return{success:!1,error:"Failed to track progress",details:e instanceof Error?e.message:"Unknown error"}}}async getMilestones(e){try{let t=await r.o6.get("/api/progress/".concat(e,"/milestones"));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to fetch milestones",details:e instanceof Error?e.message:"Unknown error"}}}async getProgressInsights(e){try{let t=await r.o6.get("/api/progress/".concat(e,"/insights"));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to fetch progress insights",details:e instanceof Error?e.message:"Unknown error"}}}async exportICP(e){try{let t=await r.o6.post("/api/export/icp",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to export ICP data",details:e instanceof Error?e.message:"Unknown error"}}}async exportCostCalculator(e){try{let t=await r.o6.post("/api/export/cost-calculator",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to export cost calculator data",details:e instanceof Error?e.message:"Unknown error"}}}async exportBusinessCase(e){try{let t=await r.o6.post("/api/export/business-case",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to export business case",details:e instanceof Error?e.message:"Unknown error"}}}async exportComprehensive(e){try{let t=await r.o6.post("/api/export/comprehensive",e);return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to export comprehensive report",details:e instanceof Error?e.message:"Unknown error"}}}async getExportStatus(e){try{let t=await r.o6.get("/api/export/status/".concat(e));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to get export status",details:e instanceof Error?e.message:"Unknown error"}}}async getExportHistory(e){try{let t=await r.o6.get("/api/export/history/".concat(e));return this.handleResponse(t)}catch(e){return{success:!1,error:"Failed to get export history",details:e instanceof Error?e.message:"Unknown error"}}}constructor(e="https://hs-andru-test.onrender.com"){this.baseUrl=e}}let n=new o,c={checkHealth:()=>n.checkHealth(),getCustomer:e=>n.getCustomer(e),updateCustomer:(e,t)=>n.updateCustomer(e,t),getCustomerICP:e=>n.getCustomerICP(e),generateAIICP:(e,t)=>n.generateAIICP(e,t),calculateCost:e=>n.calculateCost(e),calculateCostWithAI:e=>n.calculateCostWithAI(e),saveCostCalculation:e=>n.saveCostCalculation(e),getCostCalculationHistory:e=>n.getCostCalculationHistory(e),generateBusinessCase:e=>n.generateBusinessCase(e),customizeBusinessCase:(e,t)=>n.customizeBusinessCase(e,t),saveBusinessCase:e=>n.saveBusinessCase(e),getBusinessCaseTemplates:()=>n.getBusinessCaseTemplates(),getBusinessCaseHistory:e=>n.getBusinessCaseHistory(e),getCustomerProgress:e=>n.getCustomerProgress(e),trackProgress:(e,t,s)=>n.trackProgress(e,t,s),getMilestones:e=>n.getMilestones(e),getProgressInsights:e=>n.getProgressInsights(e),exportICP:e=>n.exportICP(e),exportCostCalculator:e=>n.exportCostCalculator(e),exportBusinessCase:e=>n.exportBusinessCase(e),exportComprehensive:e=>n.exportComprehensive(e),getExportStatus:e=>n.getExportStatus(e),getExportHistory:e=>n.getExportHistory(e)}},23395:(e,t,s)=>{s.d(t,{ND:()=>n});var r=s(23171);let a="https://molcqjsqtjbfclasynpg.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1vbGNxanNxdGpiZmNsYXN5bnBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODk1NDcsImV4cCI6MjA3MTQ2NTU0N30.IEP7E2VM2uV1vltbSw1CwYpYw1qw6MvI-JB5SD0tUKI";if(!a||!o)throw Error("Missing Supabase environment variables. Please check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let n=(0,r.UU)(a,o,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},68542:(e,t,s)=>{s.d(t,{ND:()=>r.ND});var r=s(23395)},80501:(e,t,s)=>{s.d(t,{o6:()=>o});var r=s(68542);class a{async getAuthHeaders(){try{let{data:{session:e},error:t}=await this.supabaseClient.auth.getSession();if(t)throw console.error("Error getting Supabase session:",t),Error("Supabase session error: ".concat(t.message));if(!(null==e?void 0:e.access_token))throw Error("No active Supabase session found");if(e.expires_at&&Date.now()/1e3>e.expires_at)throw Error("Supabase session has expired");return{Authorization:"Bearer ".concat(e.access_token),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}catch(e){throw console.error("AuthBridge: Failed to get auth headers:",e),e}}async makeAuthenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.config.backendUrl).concat(e);try{let e=await this.getAuthHeaders(),r={...t,headers:{...e,...t.headers},signal:AbortSignal.timeout(this.config.timeout)},a=null;for(let e=1;e<=this.config.retryAttempts;e++)try{console.log("AuthBridge: Making request to ".concat(s," (attempt ").concat(e,")"));let t=await fetch(s,r);if(!t.ok)if(401===t.status)throw Error("Authentication failed - please log in again");else if(403===t.status)throw Error("Access denied - insufficient permissions");else if(429===t.status)throw Error("Rate limit exceeded - please wait before trying again");else if(t.status>=500)throw Error("Server error (".concat(t.status,") - please try again later"));else throw Error("Request failed with status ".concat(t.status));let a=await t.json();return console.log("AuthBridge: Request successful to ".concat(s)),a}catch(t){if(a=t,console.warn("AuthBridge: Request failed (attempt ".concat(e,"):"),t),t instanceof Error&&(t.message.includes("Authentication failed")||t.message.includes("Access denied")))throw t;e<this.config.retryAttempts&&await new Promise(t=>setTimeout(t,this.config.retryDelay*e))}throw a||Error("Request failed after all retry attempts")}catch(e){return console.error("AuthBridge: Request failed to ".concat(s,":"),e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred",details:"Failed to communicate with backend API: ".concat(s)}}}async get(e){return this.makeAuthenticatedRequest(e,{method:"GET"})}async post(e,t){return this.makeAuthenticatedRequest(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.makeAuthenticatedRequest(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.makeAuthenticatedRequest(e,{method:"DELETE"})}async isAuthenticated(){try{let{data:{session:e}}=await this.supabaseClient.auth.getSession();return!!(null==e?void 0:e.access_token)}catch(e){return console.error("AuthBridge: Error checking authentication:",e),!1}}async getCurrentUser(){try{let{data:{user:e},error:t}=await this.supabaseClient.auth.getUser();if(t)return console.error("AuthBridge: Error getting user:",t),null;return e}catch(e){return console.error("AuthBridge: Error getting user:",e),null}}async refreshSession(){try{let{data:e,error:t}=await this.supabaseClient.auth.refreshSession();if(t)throw console.error("AuthBridge: Error refreshing session:",t),t;return e}catch(e){throw console.error("AuthBridge: Error refreshing session:",e),e}}constructor(e){this.config={backendUrl:"https://hs-andru-test.onrender.com",timeout:3e4,retryAttempts:3,retryDelay:1e3,...e},this.supabaseClient=r.ND}}let o=new a}}]);