(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2450],{16842:(e,t,s)=>{Promise.resolve().then(s.bind(s,36832))},36832:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(95155),n=s(12115),r=s(80501),c=s(2676);class l{async runTest(e,t){let s=Date.now();try{console.log("\uD83E\uDDEA Running test: ".concat(e));let a=await t(),n=Date.now()-s,r={testName:e,success:!0,details:a,duration:n};return this.results.push(r),console.log("✅ Test passed: ".concat(e," (").concat(n,"ms)")),r}catch(n){let t=Date.now()-s,a={testName:e,success:!1,error:n instanceof Error?n.message:"Unknown error",duration:t};return this.results.push(a),console.log("❌ Test failed: ".concat(e," (").concat(t,"ms) - ").concat(a.error)),a}}async testAuthenticationStatus(){let e=await r.o6.isAuthenticated();if(!e)throw Error("User is not authenticated - please log in first");return e}async testGetCurrentUser(){let e=await r.o6.getCurrentUser();if(!e)throw Error("Could not get current user information");return e}async testGetAuthHeaders(){let e=await r.o6.getAuthHeaders();if(!e.Authorization||!e.Authorization.startsWith("Bearer "))throw Error("Invalid authentication headers");return e}async testBackendHealthCheck(){let e=await c.Bs.checkHealth();if(!e.success)throw Error("Health check failed: ".concat(e.error));return e}async testAuthenticatedBackendRequest(){let e=await r.o6.getCurrentUser();if(!(null==e?void 0:e.id))throw Error("No user ID available for testing");let t=await r.o6.get("/api/docs");if(!t.success)throw Error("Authenticated request failed: ".concat(t.error));return t}async testErrorHandling(){let e=await r.o6.get("/api/non-existent-endpoint");if(e.success)throw Error("Expected request to fail, but it succeeded");return e}async runAllTests(){return console.log("\uD83D\uDE80 Starting Authentication Bridge Tests...\n"),await this.runTest("Authentication Status",()=>this.testAuthenticationStatus()),await this.runTest("Get Current User",()=>this.testGetCurrentUser()),await this.runTest("Get Auth Headers",()=>this.testGetAuthHeaders()),await this.runTest("Backend Health Check",()=>this.testBackendHealthCheck()),await this.runTest("Authenticated Backend Request",()=>this.testAuthenticatedBackendRequest()),await this.runTest("Error Handling",()=>this.testErrorHandling()),this.printSummary(),this.results}printSummary(){console.log("\n\uD83D\uDCCA Test Summary:"),console.log("================");let e=this.results.filter(e=>e.success).length,t=this.results.filter(e=>!e.success).length,s=this.results.reduce((e,t)=>e+t.duration,0);console.log("✅ Passed: ".concat(e)),console.log("❌ Failed: ".concat(t)),console.log("⏱️  Total Duration: ".concat(s,"ms")),console.log("\uD83D\uDCC8 Success Rate: ".concat(Math.round(e/this.results.length*100),"%")),t>0&&(console.log("\n❌ Failed Tests:"),this.results.filter(e=>!e.success).forEach(e=>console.log("   - ".concat(e.testName,": ").concat(e.error)))),console.log("\n\uD83C\uDFAF Authentication Bridge Test Complete!")}getResults(){return this.results}allTestsPassed(){return this.results.every(e=>e.success)}constructor(){this.results=[]}}async function i(){let e=new l;return await e.runAllTests()}async function o(){try{if(console.log("\uD83D\uDD0D Quick Authentication Test..."),!await r.o6.isAuthenticated())return console.log("❌ User not authenticated"),!1;let e=await r.o6.getCurrentUser();if(!e)return console.log("❌ Could not get user"),!1;let t=await c.Bs.checkHealth();if(!t.success)return console.log("❌ Backend health check failed"),!1;return console.log("✅ Quick authentication test passed!"),console.log("   User: ".concat(e.email)),console.log("   Backend: ".concat(t.success?"Connected":"Failed")),!0}catch(e){return console.log("❌ Quick authentication test failed:",e),!1}}function d(){let[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)([]),[d,u]=(0,n.useState)(null),[h,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await r.o6.isAuthenticated();if(g(e),e){let e=await r.o6.getCurrentUser();u(e)}}catch(e){console.error("Error checking auth status:",e),g(!1)}},x=async()=>{t(!0);try{await o()&&await m()}catch(e){console.error("Quick test failed:",e)}finally{t(!1)}},b=async()=>{t(!0);try{let e=await i();l(e)}catch(e){console.error("Full tests failed:",e)}finally{t(!1)}},f=async()=>{t(!0);try{let e=await c.Bs.checkHealth();console.log("Backend health check:",e),alert("Backend Health: ".concat(e.success?"Connected":"Failed","\n").concat(e.error||"OK"))}catch(e){console.error("Backend test failed:",e),alert("Backend test failed: ".concat(e))}finally{t(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"\uD83D\uDD10 Authentication Bridge Test"}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Authentication Status"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Status:"}),(0,a.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-sm ".concat(!0===h?"bg-green-100 text-green-800":!1===h?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:!0===h?"✅ Authenticated":!1===h?"❌ Not Authenticated":"⏳ Checking..."})]}),d&&(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",d.email]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"User ID:"})," ",d.id]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Created:"})," ",new Date(d.created_at).toLocaleDateString()]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Run Tests"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{onClick:x,disabled:e,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e?"⏳ Running...":"\uD83D\uDE80 Quick Test"}),(0,a.jsx)("button",{onClick:f,disabled:e,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e?"⏳ Testing...":"\uD83C\uDFE5 Backend Health"}),(0,a.jsx)("button",{onClick:b,disabled:e,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e?"⏳ Running...":"\uD83E\uDDEA Full Test Suite"}),(0,a.jsx)("button",{onClick:m,disabled:e,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDD04 Refresh Status"})]})]}),s.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Test Results"}),(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg border ".concat(e.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-lg mr-2",children:e.success?"✅":"❌"}),(0,a.jsx)("span",{className:"font-medium",children:e.testName})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.duration,"ms"]})]}),e.error&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-red-600",children:[(0,a.jsx)("strong",{children:"Error:"})," ",e.error]}),e.details&&(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{className:"cursor-pointer font-medium",children:"Details"}),(0,a.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-auto",children:JSON.stringify(e.details,null,2)})]})})]},t))}),(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Tests:"})," ",s.length]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Passed:"})," ",s.filter(e=>e.success).length]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Failed:"})," ",s.filter(e=>!e.success).length]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Success Rate:"})," ",Math.round(s.filter(e=>e.success).length/s.length*100),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Instructions"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Quick Test:"})," Basic authentication and backend connectivity check"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Backend Health:"})," Test connection to Express backend API"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Full Test Suite:"})," Comprehensive authentication bridge testing"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Refresh Status:"})," Update authentication status display"]})]}),(0,a.jsxs)("div",{className:"mt-3 text-sm text-blue-700",children:[(0,a.jsx)("strong",{children:"Note:"})," Make sure you're logged in with Supabase authentication before running tests."]})]})]})})})}}},e=>{e.O(0,[4134,3171,3568,2676,8441,5964,7358],()=>e(e.s=16842)),_N_E=e.O()}]);