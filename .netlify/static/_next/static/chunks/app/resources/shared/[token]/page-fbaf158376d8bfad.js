(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1838],{18786:(e,s,r)=>{Promise.resolve().then(r.bind(r,81951))},23395:(e,s,r)=>{"use strict";r.d(s,{ND:()=>n});var t=r(23171);let a="https://molcqjsqtjbfclasynpg.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1vbGNxanNxdGpiZmNsYXN5bnBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODk1NDcsImV4cCI6MjA3MTQ2NTU0N30.IEP7E2VM2uV1vltbSw1CwYpYw1qw6MvI-JB5SD0tUKI";if(!a||!i)throw Error("Missing Supabase environment variables. Please check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let n=(0,t.UU)(a,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},35695:(e,s,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},68542:(e,s,r)=>{"use strict";r.d(s,{ND:()=>t.ND});var t=r(23395)},81951:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(95155),a=r(12115),i=r(35695),n=r(68542);function l(){let e=(0,i.useParams)().token,[s,r]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null);if((0,a.useEffect)(()=>{let s=async()=>{try{c(!0),m(null);let{data:s,error:t}=await n.ND.from("resource_shares").select("*").eq("share_token",e).single();if(t||!s)throw Error("Share link not found or expired");let a=new Date,i=new Date(s.expires_at);if(a>i)throw Error("Share link has expired");let{data:l,error:d}=await n.ND.from("resources").select("*").eq("id",s.resource_id).single();if(d||!l)throw Error("Resource not found");r({resource:l,shareToken:e,expiresAt:s.expires_at,isValid:!0})}catch(e){console.error("Error fetching shared resource:",e),m(e instanceof Error?e.message:"Failed to load shared resource")}finally{c(!1)}};e&&s()},[e]),l)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading shared resource..."})]})});if(d||!s)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-md mx-auto text-center",children:(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,t.jsx)("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),(0,t.jsx)("h1",{className:"text-xl font-semibold text-red-800 mb-2",children:"Share Link Issue"}),(0,t.jsx)("p",{className:"text-red-600 mb-4",children:d||"This share link is not valid"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"The link may have expired, been revoked, or the resource may no longer be available."})]})})});let{resource:o,expiresAt:x}=s,h=new Date(x).toLocaleDateString();return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:o.title}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Shared Resource"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Expires"}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:h})]})]})})}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Tier ",o.tier]}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:o.category.replace("_"," ")})]}),o.description&&(0,t.jsx)("p",{className:"text-gray-700 mb-4",children:o.description})]}),(0,t.jsx)("div",{className:"prose max-w-none",children:o.content&&(0,t.jsxs)("div",{className:"space-y-6",children:[o.content.summary&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Summary"}),(0,t.jsx)("p",{className:"text-gray-700",children:o.content.summary})]}),o.content.sections&&o.content.sections.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Content Sections"}),(0,t.jsx)("div",{className:"space-y-4",children:o.content.sections.map((e,s)=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-700 mb-2",children:e.content}),e.action&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"Action:"})," ",e.action]})})]},s))})]}),o.content.deliverables&&o.content.deliverables.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Deliverables"}),(0,t.jsx)("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:o.content.deliverables.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),o.content.estimatedTime&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Estimated Time"}),(0,t.jsx)("p",{className:"text-gray-700",children:o.content.estimatedTime})]})]})}),(0,t.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,t.jsxs)("div",{children:["Shared from ",(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"H&S Revenue Intelligence Platform"})]}),(0,t.jsxs)("div",{children:["This link expires on ",h]})]})})]})})]})}}},e=>{e.O(0,[4134,3171,8441,5964,7358],()=>e(e.s=18786)),_N_E=e.O()}]);