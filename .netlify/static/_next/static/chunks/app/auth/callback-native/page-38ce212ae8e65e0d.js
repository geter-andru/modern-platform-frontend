(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9571],{6175:(e,s,n)=>{Promise.resolve().then(n.bind(n,91586))},23395:(e,s,n)=>{"use strict";n.d(s,{ND:()=>o});var t=n(23171);let i="https://molcqjsqtjbfclasynpg.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1vbGNxanNxdGpiZmNsYXN5bnBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODk1NDcsImV4cCI6MjA3MTQ2NTU0N30.IEP7E2VM2uV1vltbSw1CwYpYw1qw6MvI-JB5SD0tUKI";if(!i||!a)throw Error("Missing Supabase environment variables. Please check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let o=(0,t.UU)(i,a,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},35695:(e,s,n)=>{"use strict";var t=n(18999);n.o(t,"useParams")&&n.d(s,{useParams:function(){return t.useParams}}),n.o(t,"usePathname")&&n.d(s,{usePathname:function(){return t.usePathname}}),n.o(t,"useRouter")&&n.d(s,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(s,{useSearchParams:function(){return t.useSearchParams}})},68542:(e,s,n)=>{"use strict";n.d(s,{ND:()=>t.ND});var t=n(23395)},91586:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>l});var t=n(95155),i=n(12115),a=n(35695),o=n(68542);function l(){let e=(0,a.useRouter)(),[s,n]=(0,i.useState)("Processing authentication...");return(0,i.useEffect)(()=>{console.log("\uD83D\uDE80 Native callback - letting Supabase handle everything automatically");let{data:{subscription:s}}=o.ND.auth.onAuthStateChange(async(s,t)=>{var i,a,l,r;if(console.log("\uD83D\uDD14 Native Callback - Auth event:",s),console.log("\uD83D\uDD14 Session details:",{hasSession:!!t,userId:null==t||null==(i=t.user)?void 0:i.id,userEmail:null==t||null==(a=t.user)?void 0:a.email,accessToken:(null==t?void 0:t.access_token)?"present":"missing"}),"SIGNED_IN"===s&&t){console.log("✅ SIGNED_IN event - user authenticated successfully"),n("Authentication successful! Redirecting...");let{data:{session:s}}=await o.ND.auth.getSession();console.log("\uD83D\uDD0D Session verification:",{sessionPersisted:!!s,sameUser:(null==s||null==(l=s.user)?void 0:l.id)===(null==t||null==(r=t.user)?void 0:r.id)}),s?(console.log("✅ Session verified, redirecting to dashboard"),e.replace("/dashboard")):(console.log("❌ Session not persisted, trying again..."),n("Session not persisted, retrying..."))}else"INITIAL_SESSION"===s&&t?(console.log("✅ INITIAL_SESSION - existing session detected"),n("Existing session found, redirecting..."),e.replace("/dashboard")):"SIGNED_OUT"===s?(console.log("\uD83D\uDC4B User signed out"),n("Signed out, redirecting to login..."),e.replace("/login")):"TOKEN_REFRESHED"===s?console.log("\uD83D\uDD04 Token refreshed"):console.log("⚠️ Unhandled auth event:",s,"Session exists:",!!t)});return setTimeout(async()=>{var s;let{data:{session:t},error:i}=await o.ND.auth.getSession();console.log("\uD83D\uDD52 Delayed session check:",{hasSession:!!t,error:i,userId:null==t||null==(s=t.user)?void 0:s.id}),t?(console.log("✅ Delayed check found session, redirecting"),n("Session found, redirecting..."),e.replace("/dashboard")):t||i||(console.log("❌ No session after 3 seconds, returning to login"),n("Authentication failed, redirecting to login..."),setTimeout(()=>e.replace("/login"),2e3))},3e3),()=>{console.log("\uD83E\uDDF9 Unsubscribing from auth changes"),s.unsubscribe()}},[e]),(0,t.jsx)("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-xl text-white mb-2",children:"Native OAuth Processing"}),(0,t.jsx)("p",{className:"text-gray-400",children:s}),(0,t.jsxs)("div",{className:"mt-8 text-xs text-gray-600",children:[(0,t.jsx)("p",{children:"This callback lets Supabase handle OAuth completely natively."}),(0,t.jsx)("p",{children:"Using detectSessionInUrl: true and onAuthStateChange."})]})]})})}}},e=>{e.O(0,[4134,3171,8441,5964,7358],()=>e(e.s=6175)),_N_E=e.O()}]);